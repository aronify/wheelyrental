@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Apply Urbanist font to body, headings, buttons, and labels */
  body {
    font-family: var(--font-urbanist), sans-serif;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-urbanist), sans-serif;
  }

  button {
    font-family: var(--font-urbanist), sans-serif;
  }

  label {
    font-family: var(--font-urbanist), sans-serif;
  }

  /* Keep system UI fonts for form input fields only (better readability) */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="tel"],
  input[type="url"],
  input[type="search"],
  input[type="date"],
  input[type="time"],
  input[type="datetime-local"],
  textarea,
  select {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  }

  /* Keep system fonts for code and monospace elements */
  code,
  pre,
  kbd,
  samp {
    font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
  }

  /* Mobile optimizations */
  @media (max-width: 1023px) {
    /* Prevent text size adjustment on iOS */
    html {
      -webkit-text-size-adjust: 100%;
      text-size-adjust: 100%;
    }

    /* Prevent horizontal overflow globally */
    html, body {
      overflow-x: hidden;
      width: 100%;
      max-width: 100vw;
      position: relative;
    }

    /* Better touch targets - minimum 44x44px */
    button,
    a,
    input[type="button"],
    input[type="submit"],
    input[type="reset"] {
      min-height: 44px;
      min-width: 44px;
    }

    /* Improve form inputs for mobile */
    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="number"],
    input[type="tel"],
    input[type="url"],
    input[type="search"],
    input[type="date"],
    input[type="time"],
    input[type="datetime-local"],
    textarea,
    select {
      font-size: 16px; /* Prevents zoom on iOS */
      min-height: 44px;
    }

    /* Better scrolling on mobile */
    * {
      -webkit-overflow-scrolling: touch;
    }

    /* Prevent pull-to-refresh on overscroll */
    body {
      overscroll-behavior-y: contain;
      overscroll-behavior-x: contain;
    }

    /* Fix for large mobile devices (iPhone 15 Pro Max, etc.) */
    @media (min-width: 375px) and (max-width: 480px) {
      body {
        font-size: 16px;
        line-height: 1.5;
      }
      
      /* Better container padding for large phones */
      .container,
      [class*="max-w"] {
        padding-left: 1.25rem;
        padding-right: 1.25rem;
      }
      
      /* Better text sizing for large phones */
      h1 {
        font-size: 1.75rem;
        line-height: 1.2;
      }
      
      h2 {
        font-size: 1.5rem;
        line-height: 1.3;
      }
      
      h3 {
        font-size: 1.25rem;
        line-height: 1.4;
      }
      
      /* Ensure modals and cards don't overflow */
      [class*="rounded"],
      [class*="modal"],
      [class*="card"] {
        max-width: 100%;
        box-sizing: border-box;
      }
      
      /* Better spacing for large phones */
      [class*="px-4"] {
        padding-left: 1.25rem;
        padding-right: 1.25rem;
      }
    }
  }

  /* Global smooth transitions for common elements */
  * {
    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
  }

  /* Optimize animations for performance */
  @media (prefers-reduced-motion: no-preference) {
    /* Only apply smooth scrolling if user doesn't prefer reduced motion */
    html {
      scroll-behavior: smooth;
    }
  }
}

@layer utilities {
  /* Respect user's motion preferences */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Fade in animation - GPU accelerated */
  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  /* Slide in from bottom - GPU accelerated */
  @keyframes slide-in {
    from {
      transform: translateY(20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* Slide in from top - GPU accelerated */
  @keyframes slide-in-top {
    from {
      transform: translateY(-20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* Slide down - for dropdowns */
  @keyframes slide-down {
    from {
      max-height: 0;
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      max-height: 500px;
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Scale fade - for modals */
  @keyframes scale-fade {
    from {
      transform: scale(0.95);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Pulse - for loading states */
  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  /* Shimmer - for skeleton loading */
  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  /* Blob animation for background elements */
  @keyframes blob {
    0% {
      transform: translate(0px, 0px) scale(1);
    }
    33% {
      transform: translate(30px, -50px) scale(1.1);
    }
    66% {
      transform: translate(-20px, 20px) scale(0.9);
    }
    100% {
      transform: translate(0px, 0px) scale(1);
    }
  }

  /* Animation classes */
  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }

  .animate-slide-in {
    animation: slide-in 0.3s ease-out;
  }

  .animate-slide-in-top {
    animation: slide-in-top 0.3s ease-out;
  }

  .animate-slide-down {
    animation: slide-down 0.3s ease-out;
  }

  .animate-scale-fade {
    animation: scale-fade 0.2s ease-out;
  }

  .animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .animate-blob {
    animation: blob 7s infinite;
  }

  .animation-delay-2000 {
    animation-delay: 2s;
  }

  .animation-delay-4000 {
    animation-delay: 4s;
  }

  /* Stagger animation delays for lists */
  .animate-delay-100 {
    animation-delay: 0.1s;
  }

  .animate-delay-200 {
    animation-delay: 0.2s;
  }

  .animate-delay-300 {
    animation-delay: 0.3s;
  }

  /* Smooth transitions for interactive elements */
  .transition-smooth {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .transition-slow {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* GPU-accelerated transforms */
  .gpu-accelerated {
    transform: translateZ(0);
    will-change: transform;
  }

  /* Mobile-specific utilities */
  .touch-manipulation {
    touch-action: manipulation;
  }

  /* Safe area insets for notched devices */
  .safe-area-inset-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-inset-top {
    padding-top: env(safe-area-inset-top);
  }

  /* Better mobile spacing */
  @media (max-width: 640px) {
    .mobile-padding {
      padding-left: 1rem;
      padding-right: 1rem;
    }
  }

  /* Performance optimizations for animations */
  .will-animate {
    will-change: transform, opacity;
  }

  /* Remove will-change after animation to free GPU memory */
  .animation-complete {
    will-change: auto;
  }
}

